# M5StackTempServer
温度計サーバー

## 要件
温湿度値をローカルネットワークから閲覧できるようこと

## 仕様
### 機材
コントローラとしてM5Stackを利用する。
センサーとしてDHT11を使用する。
仕様:<https://www.mouser.com/datasheet/2/758/DHT11-Technical-Data-Sheet-Translated-Version-1143054.pdf>

コントローラはhttpサーバーを起動、センサーの値を取得しレスポンスとして値を返す。

### ソフトウェア
実装簡略化のためArduinoおよび下記ライブラリを用いる
####Arduino library for DHT11, DHT22
https://github.com/adafruit/DHT-sensor-library

#### DHT11
##### ピン配置
1. VDD(3-5.5V)
1. DATA(バス、電源投入後1秒間はデータを送信しない。)
1. OPEN
1. GND(100μFのパスコンを準備しておく)
OPENは使用しない。

バスは5Vでプルアップする。
##### 通信
シリアル方式
フォーマットは
1. 相対湿度整数(8bit)
1. 相対湿度浮動小数(8bit)
1. 温度整数(8bit)
1. 温度浮動小数(8bit)
1. チェックサム(8bit、上記4フォーマットの加算した数の後ろ8bit)

開始、コントローラからスタートビットを送る(最低18μS)
コントローラ側をローインピーダンスにする(20-40μS)
センサーが開始信号を送る(LOW80μS->HIGH80μS)
データ送信(各ビットはLOW50μS->HIGH(26-28μSで0, 70μSで1、8bit分繰り返し)
センサーが終了信号を送る(50μS)
終了、コントローラはローインピーダンスのまま次の転送に備える。



